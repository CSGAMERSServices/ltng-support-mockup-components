<template>
    <div class="static-resource-helper slds-box slds-card slds-theme_default">
        <h1 class="slds-text-heading_small">Update / Create Files</h1>
        <lightning-layout multiple-rows="true" horizontal-align="center">
            <lightning-layout-item size="12" small-device-size="6" padding="around-small">
            <!--
                <lightning-input
                    type="file" label="Image"
                    class="file-selector"
                    required accept="image/png, image/jpg, image/jpeg, image/gif"
                    message-when-value-missing="Please upload an image (png, gif, jpg)"
                    onchange={handleFileChanged}
                ></lightning-input>
            -->
                <c-test-file-input
                    onfilechange={handleFileChanged}
                ></c-test-file-input>
            </lightning-layout-item>
            <lightning-layout-item size="12" small-device-size="6" padding="around-small">
                <div class="preview" if:true={fileToUploadBase64}>
                    <img 
                        src={fileToUploadBase64}
                        style="max-width: 100%; max-height: 100px;"
                    />
                    <p>(Preview)</p>
                </div>
            </lightning-layout-item>
            <lightning-layout-item size="12" padding="around-small">
                <div class='alert' if:true={error}>
                    <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_error" role="alert">
                        <span class="slds-assistive-text">Error</span>
                        <lightning-icon icon-name="utility:error" class="slds-m-right_x-small"
                            alternative-text="Error" title="Error"
                        ></lightning-icon>
                        <h2>
                            {error}
                        </h2>
                    </div>
                </div>
                <!--
                <div class='alert' if:true={hasRecordToUpdate}>
                    <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_info" role="alert">
                        <span class="slds-assistive-text">warning</span>
                        <lightning-icon icon-name="utility:warning" class="slds-m-right_x-small"
                            alternative-text="Warning" title="Warning"
                        ></lightning-icon>
                        <h2 if:true={isNew}>
                            New file will be created: {newFileName}
                        </h2>
                        <h2 if:false={isNew}>
                            File will be updated: {newFileName}
                        </h2>
                    </div>
                </div>
                -->
                <c-ltng_editable-combobox
                    label="Salesforce File"
                    is-open="true"
                    placeholder="Name of File (or new File to create)"
                    text={queryTerm}
                    options={options}
                    onchange={handleRecordChanged}
                    onkeyup={handleKeyUp}
                ></c-ltng_editable-combobox>
            </lightning-layout-item>
            <lightning-layout-item size="12" padding="around-small">
                <div class='actions'>
                    <lightning-button
                        variant="brand"
                        disabled={isSubmissionDisabled}
                        label={buttonLabel}
                        onclick={handleSubmit}
                    ></lightning-button>
                </div>
            </lightning-layout-item>
        </lightning-layout>
    </div>
</template>